{"version":3,"sources":["components/GoogleCalendarLink.js","components/ErrorBoundry.js","DateTimeUtils.js","components/WeekSwitcher.js","CalendarClinet.js","EventProcessor.js","components/Calendar.js","DomHelpers.js","App.js","serviceWorker.js","index.js"],"names":["CALENDAR_LINK","GoogleCalnedarLink","_ref","text","react_default","a","createElement","href","target","rel","ErrorBoundry","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","hasError","className","children","error","React","Component","DOWs","MONTHs","addDays","date","days","newDate","Date","setDate","getDate","formatTime","dt","zeroPadded","getHours","getMinutes","n","toString","padStart","getLastMonday","setHours","setMinutes","getDay","WeekSwitcher","startDate","endDate","incrementDate","onClick","startMonth","getMonth","toLocaleLowerCase","endMonth","concat","formatDateRange","EVENTS_URL","getEvents","url","URL","search","URLSearchParams","key","singleEvents","showDeleted","orderBy","timeMin","toISOString","timeMax","getParams","fetch","then","res","json","jsn","DayParts","name","endHour","parseEvent","event","description","Fragment","fbEventRE","splitText","split","splitTextIter","values","fbEvents","match","currText","elements","elemsCount","length","i","next","value","push","replaceFacebookLinks","_unused","processed","id","summary","startDT","start","dateTime","endDT","end","isNaN","Error","splitToBins","bins","binMembershipFunc","items","result","item","Array","from","reverse","pop","currItems","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","bin","err","return","splitEventsByDate","events","range","getDateRange","d1","d2","getFullYear","Calendar","showDescriptionOn","removeClickListener","errorLoading","showDescirption","bind","assertThisInitialized","updateEvents","incrementStartDate","eventId","element","_this2","setState","hide","outsideClickListener","contains","document","addEventListener","removeEventListener","hideOnClickOutside","increment","_this3","prevState","_this4","toConsumableArray","filter","e","status","reduce","acc","_this5","dayCols","map","objectSpread","descriptionVisible","hideDescription","slice","d","DayColumn","Event","_this6","descriptionElement","createRef","_this7","_this$props$event","timeClass","current","EventDescription","hidden","elementRef","ref","title","DayPartBlock","_ref2","dow","eventEls","Calendar_Event","_ref3","dowName","dpEls","dp","el","splitEventsByDaypart","App","ErrorBoundry_ErrorBoundry","Calendar_Calendar","Boolean","window","location","hostname","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1d9591bb.chunk.js","sourcesContent":["import React from 'react'\n\nconst CALENDAR_LINK = 'https://calendar.google.com/calendar/embed?src=huvrl6on8orta0eq5jvpufjvhg%40group.calendar.google.com'\n\n\nexport default function GoogleCalnedarLink({text}) {\n  text = text || 'Переглянути в Google Календарі'\n  return <a href={CALENDAR_LINK} target='_blank' rel='noopener noreferrer'>\n    {text}\n  </a>\n}","import React from 'react'\n\nimport GoogleCalendarLink from './GoogleCalendarLink'\n\n\nexport default class ErrorBoundry extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hasError: false\n    }\n  }\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <p className='epic-fail-error'>\n        Щось пішло не так :( Але в нас є ще <GoogleCalendarLink text=\"Google Календар\"/>\n      </p>;\n    }\n    return this.props.children;\n  }\n}","export const DOWs = [\n  'неділя',\n  'понеділок',\n  'вівторок',\n  'середа',\n  'четвер',\n  \"п'ятниця\",\n  'субота',\n]\n\nexport const MONTHs = [\n  'Січень',\n  'Лютий',\n  'Березень',\n  'Квітень',\n  'Травень',\n  'Червень',\n  'Липень',\n  'Серпень',\n  'Вересень',\n  'Жовтень',\n  'Листопад',\n  'Грудень'\n]\n\nexport function addDays(date, days) {\n  const newDate = new Date(date)\n  newDate.setDate(newDate.getDate() + days)\n  return newDate\n}\n\n\nexport function isSameDate(d1, d2) {\n  return d1.getFullYear() === d2.getFullYear() &&\n    d1.getMonth() === d2.getMonth() &&\n    d1.getDate() === d2.getDate()\n}\n\nexport function formatTime(dt) {\n  dt = new Date(dt)\n  const hours = zeroPadded(dt.getHours())\n  const minutes = zeroPadded(dt.getMinutes())\n  return hours + ':' + minutes\n}\n\n\nexport function zeroPadded(n) {\n  return n.toString().padStart(2, '0')\n}\n\nexport function formatDate(dt) {\n  return `${zeroPadded(dt.getMonth() + 1)}.${zeroPadded(dt.getDate())}`\n}\n\nexport function getLastMonday() {\n  let date = new Date()\n  date.setHours(0)\n  date.setMinutes(0)\n  while (date.getDay() !== 1) {\n    date.setDate(date.getDate() - 1)\n  }\n  return date\n}\n\nexport function formatDateRange(startDate, endDate) {\n  // todo deal with end date - 1 in some more consistent way\n  // i.e. take timezones into account\n  endDate = addDays(endDate, -1)\n  const startMonth = MONTHs[startDate.getMonth()].toLocaleLowerCase()\n  const endMonth = MONTHs[endDate.getMonth()].toLocaleLowerCase()\n  if (startMonth === endMonth) {\n    return `${startMonth} ${startDate.getDate()} - ${endDate.getDate()}`\n  } else {\n    return `${startMonth} ${startDate.getDate()} - ${endMonth} ${endDate.getDate()}`\n  }\n}\n\n\nexport function getDateRange(startDate, endDate) {\n  const range = [startDate]\n  while (range[range.length - 1] < endDate) {\n    range.push(addDays(range[range.length - 1], 1))\n  }\n  return range\n}","import React from 'react'\n\nimport {formatDateRange} from '../DateTimeUtils.js'\n\n\nexport default function WeekSwitcher({startDate, endDate, incrementDate}) {\n  return (\n    <div className=\"calendar__week-switcher\">\n      <button className=\"calendar__week-switcher-button\" onClick={() => incrementDate(-7)}>{'<'}</button>\n      <button className=\"calendar__week-switcher-button\" onClick={() => incrementDate(7)}>{'>'}</button>\n      <h2 className=\"calendar__week-title\">\n        {formatDateRange(startDate, endDate)}\n      </h2>\n    </div>\n  )\n}","const CALNEDAR_ID = 'huvrl6on8orta0eq5jvpufjvhg@group.calendar.google.com'\nconst EVENTS_URL = `https://www.googleapis.com/calendar/v3/calendars/${CALNEDAR_ID}/events`\n\n\nfunction getParams(startDate, endDate) {\n  return new URLSearchParams({\n    key: 'AIzaSyCSfbZP7HVduNPD1s-1aVwQe5pSYWn8WSk',\n    singleEvents: true,\n    showDeleted: false,\n    orderBy: 'startTime',\n    timeMin: startDate.toISOString(),\n    timeMax: endDate.toISOString(),\n  })\n}\n\nexport function getEvents(startDate, endDate) {\n  const url = new URL(EVENTS_URL)\n  url.search = getParams(startDate, endDate)\n  return fetch(url).then(\n    res => res.json(),\n  ).then(\n    jsn => {\n      if (jsn.error) {\n        throw jsn.error\n      }\n      return jsn\n    }\n  )\n}","import React from 'react'\n\nimport { isSameDate, getDateRange } from './DateTimeUtils'\n\nconst DayParts = [\n  {\n    name: 'morning',\n    endHour: 11,\n  }, {\n    name: 'day',\n    endHour: 18,\n  }, {\n    name: 'evening',\n    endHour: 24\n  }\n]\n\nexport function parseEvent(event) {\n  let description\n  try {\n    description = replaceFacebookLinks(event.description)\n  } catch {\n    description = [\n      <React.Fragment key={0}>{event.description}</React.Fragment>\n    ]\n  }\n  const processed = {\n    id: event.id,\n    summary: event.summary,\n    description: description,\n    startDT: new Date(event.start.dateTime),\n    endDT: new Date(event.end.dateTime)\n  }\n  if (isNaN(processed.startDT) || isNaN(processed.endDT)) {\n    throw new Error('Could not parse datetimes')\n  }\n  return processed\n}\n\nexport function splitToBins(bins, binMembershipFunc, items) {\n  items = Array.from(items).reverse()\n  const result = []\n  let item = items.pop()\n  let currItems = []\n  for (let bin of bins) {\n    while (item !== undefined && binMembershipFunc(bin, item)) {\n      currItems.push(item)\n      item = items.pop()\n    }\n    result.push([bin, currItems])\n    currItems = []\n  }\n  return result\n}\n\n// handle events out of the range\nexport function splitEventsByDaypart(events) {\n  const res = splitToBins(\n    DayParts, (dp, event) => event.startDT.getHours() < dp.endHour,\n    events\n  ).map(el => [el[0].name, el[1]])\n\n  return [...res]\n}\n\n// merege with daypart splitter\nexport function splitEventsByDate(events, startDate, endDate) {\n  // assuming events are sorted in ascending order\n  const dateRange = getDateRange(startDate, endDate)\n  const res = splitToBins(\n    dateRange, (bin, event) => isSameDate(bin, event.startDT),\n    events\n  )\n  return res\n}\n\n\nfunction replaceFacebookLinks(text) {\n  if (!text) {\n    return [<React.Fragment key={0}></React.Fragment>]\n  }\n  const fbEventRE = /https:\\/\\/www\\.facebook\\.com\\/events\\/\\d+\\//g\n  const splitText = text.split(fbEventRE)\n  const splitTextIter = splitText.values()\n  let fbEvents = text.match(fbEventRE)\n  if (fbEvents) {fbEvents = fbEvents.values()}\n  const elements = []\n  const elemsCount = 2 * splitText.length - 1\n  let currText\n  for (let i=0; i<elemsCount; i++) {\n    if (!(i%2)) {\n      currText = splitTextIter.next().value\n      if (currText) {\n        elements.push(\n          <React.Fragment key={i}>{currText}</React.Fragment>\n        )\n      }\n    } else {\n      currText = fbEvents.next().value\n      elements.push(\n        <a key={i} href={currText} target='_blank' rel='noopener noreferrer' className='fb-link'>\n          подія на fb\n        </a>\n      )\n    }\n  }\n  return elements\n}","import React from 'react'\n\nimport WeekSwitcher from './WeekSwitcher'\nimport { getEvents } from '../CalendarClinet'\nimport {\n  parseEvent, splitEventsByDate, splitEventsByDaypart\n} from '../EventProcessor.js'\nimport {\n  getLastMonday, addDays, formatDate, formatTime, DOWs\n} from '../DateTimeUtils.js'\nimport hideOnClickOutside from '../DomHelpers'\nimport GoogleCalendarLink from './GoogleCalendarLink'\n\nimport './Calendar.scss'\n\n\n\nexport default class Calendar extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      events: [],\n      startDate: getLastMonday(),\n      showDescriptionOn: undefined,\n      removeClickListener: () => undefined,\n      errorLoading: false,\n    }\n\n    this.showDescirption = this.showDescirption.bind(this)\n    this.updateEvents = this.updateEvents.bind(this)\n    this.incrementStartDate = this.incrementStartDate.bind(this)\n  }\n\n  showDescirption(eventId, element) {\n    this.state.removeClickListener()\n    this.setState({showDescriptionOn: eventId}, () => {\n      if (element) {\n        const removeClickListener = hideOnClickOutside(\n          element, () => this.setState({showDescriptionOn: null})\n        )\n        this.setState({\n          removeClickListener: removeClickListener\n        })\n      }\n    })\n  }\n\n  incrementStartDate(increment) {\n    this.setState(prevState => ({\n      startDate: addDays(prevState.startDate, increment)\n    }), () => this.updateEvents())\n\n  }\n\n  updateEvents() {\n    const startDate = this.state.startDate\n    const endDate = addDays(startDate, 7)\n    getEvents(this.state.startDate, endDate).then(\n      result => {\n       this.setState({\n        events: [...result.items\n          .filter(e => !(e.status === 'cancelled'))\n          .reduce(\n            (acc, event) => {\n              try {\n                acc.push(parseEvent(event))\n              } catch {\n              }\n              return acc}, []\n          )]}\n        )\n      },\n      (error) => this.setState({errorLoading: true})\n    )\n  }\n\n  componentDidMount() {\n    this.updateEvents()\n  }\n\n  render() {\n    const startDate = this.state.startDate\n    const endDate = addDays(startDate, 7)\n    const events = this.state.events.map(e => ({\n      ...e,\n      descriptionVisible: e.id === this.state.showDescriptionOn,\n      showDescirption: (element) => this.showDescirption(e.id, element),\n      hideDescription: () => this.showDescirption(),\n    }))\n    const eventsByDate = splitEventsByDate(\n      events,\n      startDate,\n      endDate\n    ).slice(0, 7)\n\n    const dayCols = eventsByDate.map(\n      d => (\n        <DayColumn date={d[0]} events={d[1]} key={d}/>\n      )\n    )\n    return (\n      <>\n      <WeekSwitcher startDate={startDate} endDate={endDate}\n        incrementDate={this.incrementStartDate}/>\n      <div className='calendar'>\n        {dayCols}\n      </div>\n      {this.state.errorLoading\n        ? <p className='loading-error'>\n            Вибачте, не вдалося завантажити події, дивіться у <GoogleCalendarLink text='Google Календарі'/>\n          </p>\n        : <p className='google-cal-link'><GoogleCalendarLink/></p>\n      }\n      </>\n    )\n  }\n}\n\n\nclass Event extends React.Component {\n  constructor(props) {\n    super(props)\n    this.descriptionElement = React.createRef()\n  }\n\n  render() {\n    const {\n      summary, description, startDT, endDT,\n      showDescirption, descriptionVisible, hideDescription\n    } = this.props.event\n    const timeClass = 'calendar__event-time ' +\n      (descriptionVisible? 'calendar__event-time_em' : '')\n    return (\n      <article className=\"calendar__event\">\n        <h3 className=\"calendar__event-title\" onClick={() => {\n          showDescirption(this.descriptionElement.current)\n        }}>{summary}</h3>\n        <p className={timeClass}>{\n          formatTime(startDT)} - {formatTime(endDT)}\n        </p>\n        <EventDescription summary={summary} description={description}\n          hide={hideDescription} hidden={!descriptionVisible}\n          elementRef={this.descriptionElement}/>\n      </article>\n    )\n  }\n}\n\n\nfunction EventDescription({summary, description, hidden, hide, elementRef}) {\n  const className = \"calendar__event-description \"\n    + (hidden? \"calendar__event-description_hidden\" : \"\")\n  return (\n    <div className={className} ref={elementRef}>\n      <h3 className=\"calendar__event-description-title\">{summary}</h3>\n      <p className=\"calendar__event-description-text\">{description}</p>\n      <div onClick={hide} className=\"calendar__close-event-descr-btn\" title='закрити'>×</div>\n    </div>\n  )\n}\n\nfunction DayPartBlock({name, events, dow}) {\n  const className = `calendar__slot calendar__slot_day_${dow} calendar__slot_${name}`\n  const eventEls = events.map(e => <Event key={e.id} event={e}/>)\n  return <div className={className}>\n    {eventEls}\n  </div>\n}\n\n\nfunction DayColumn({date, events}) {\n  const dow = date.getDay()\n  const dowName = DOWs[dow]\n  const eventsByDaypart = splitEventsByDaypart(events)\n  const dpEls = eventsByDaypart.map(\n    item => <DayPartBlock name={item[0]} key={item[0]} events={item[1]} dow={dow}/>\n  )\n\n  const dayClassName = 'calendar__slot_day_' + dow\n  const className = \"calendar__slot \" + dayClassName\n  return (\n  <>\n    <div className={className + \" calendar__slot_label\"}>\n      <h3 className=\"calendar__dow_title\">{dowName}</h3>\n      <p className=\"calendar__date\">{formatDate(date)}</p>\n    </div>\n    {dpEls}\n  </>)\n}","export default function hideOnClickOutside(element, hide) {\n  const outsideClickListener = event => {\n    if (!element.contains(event.target)) {\n      hide()\n    }\n  }\n\n  document.addEventListener('click', outsideClickListener)\n  const removeClickListener = () => {\n    document.removeEventListener('click', outsideClickListener)\n  }\n\n  return removeClickListener\n}\n","import React, { Component } from 'react';\n\nimport ErrorBoundry from './components/ErrorBoundry'\nimport Calendar from './components/Calendar.js'\n\nclass App extends Component {\n  render() {\n    return (\n      <ErrorBoundry> <Calendar/> </ErrorBoundry>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}